{% extends "base.html" %}
{% load static %}

{% block title %}ì‚¬ì—…ì¥ ëª©ë¡ - ìŠ¤ë§ˆíŠ¸ ì‚¬ì—…ì ê°€ê³„ë¶€{% endblock %}

{% block content %}
<div class="content-wrapper">
    <section class="welcome-section">
        <div class="welcome-header">
            <span class="welcome-icon">ğŸ¢</span>
            <h2 class="page-title">ì‚¬ì—…ì¥ ëª©ë¡</h2>
            <p class="description">ë“±ë¡ëœ ì‚¬ì—…ì¥ì„ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </div>

        <div class="cta-section" style="border: none; background: none; padding-bottom: 0;">
            <a href="{% url 'businesses:business_create' %}" class="btn btn-primary">+ ì‚¬ì—…ì¥ ì¶”ê°€</a>
        </div>

        <div class="welcome-message">
            <form method="get" style="display: flex; gap: 10px; margin-bottom: var(--spacing-md); align-items: center;">
                {% for field in search_form %}
                    <div class="filter-field">
                        {# í•„ë“œ ìì²´ë¥¼ ë Œë”ë§ (Select ë°•ìŠ¤ê°€ ì¶œë ¥ë¨) #}
                        {{ field }}
                        
                        {# ì—ëŸ¬ê°€ ìˆì„ ê²½ìš° í‘œì‹œ #}
                        {% if field.errors %}
                            <div style="color: red; font-size: 0.7rem;">{{ field.errors }}</div>
                        {% endif %}
                    </div>
                {% endfor %}
                
                <button type="submit" class="btn btn-primary" style="padding: 8px 16px;">í•„í„°</button>
            </form>
        </div>

        <div class="welcome-message">
            {% if businesses %}
            <div class="dashboard-container">
                <div class="summary-grid" style="grid-template-columns: 1fr;">
                    {% for business in businesses %}
                    <div class="summary-item">
                        <a href="{% url 'businesses:business_detail' business.pk %}" style="text-decoration: none; color: inherit; width: 100%; display: block;">
                            <span class="summary-label">
                                {{ business.name }}
                                <span style="font-size: 0.8rem; color: {% if business.branch_type == 'main' %}#27ae60{% else %}#3498db{% endif %}; margin-left: 8px;">
                                    [{{ business.get_branch_type_display }}]
                                </span>
                            </span>
                            <span class="summary-value">{{ business.location|default:"ìœ„ì¹˜ ë¯¸ë“±ë¡" }} Â· {{ business.business_type|default:"ì—…ì¢… ë¯¸ë“±ë¡" }}</span>
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% else %}
            <p class="description">ë“±ë¡ëœ ì‚¬ì—…ì¥ì´ ì—†ìŠµë‹ˆë‹¤. ìƒˆ ì‚¬ì—…ì¥ì„ ì¶”ê°€í•´ë³´ì„¸ìš”!</p>
            {% endif %}
        </div>
    </section>
</div>
{% endblock %}