{% extends "base.html" %}
{% load static %}
{% load humanize %}

{% block title %}{{ business.name }} - ìƒì„¸ ì •ë³´{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-5">
        <div class="d-flex align-items-center">
            <a href="{% url 'businesses:business_list' %}" class="btn btn-outline-secondary btn-sm me-3 shadow-sm px-3">
                â† ëª©ë¡
            </a>
            <h3 class="mb-0 fw-bold text-dark">{{ business.name }}</h3>
        </div>
        <div class="d-flex gap-2">
            <a href="{% url 'businesses:business_update' business.pk %}" class="btn btn-warning fw-bold px-3 shadow-sm">
                âœï¸ ìˆ˜ì •
            </a>
            <a href="{% url 'businesses:business_delete' business.pk %}" class="btn btn-outline-danger fw-bold px-3 shadow-sm">
                ğŸ—‘ï¸ ì‚­ì œ
            </a>
        </div>
    </div>

    <div class="row g-4">
        <div class="col-lg-8">
            <div class="card border-0 shadow-sm mb-4" style="border-radius: 15px;">
                <div class="card-header bg-white py-3 d-flex justify-content-between align-items-center border-bottom">
                    <h5 class="fw-bold mb-0 text-dark">ê¸°ë³¸ ì •ë³´</h5>
                    <span class="badge {% if business.branch_type == 'main' %}bg-primary{% else %}bg-secondary{% endif %} rounded-pill px-3">
                        {{ business.get_branch_type_display }}
                    </span>
                </div>
                <div class="card-body p-4">
                    <div class="row py-2 border-bottom border-light-subtle">
                        <div class="col-sm-4 text-muted">ì‚¬ì—…ì¥ëª…</div>
                        <div class="col-sm-8 fw-bold">{{ business.name }}</div>
                    </div>
                    <div class="row py-2 border-bottom border-light-subtle">
                        <div class="col-sm-4 text-muted">ì‚¬ì—…ì ë“±ë¡ë²ˆí˜¸</div>
                        <div class="col-sm-8 fw-semibold">{{ business.registration_number|default:"ë¯¸ë“±ë¡" }}</div>
                    </div>
                    <div class="row py-2 border-bottom border-light-subtle">
                        <div class="col-sm-4 text-muted">ì—…ì¢…</div>
                        <div class="col-sm-8">{{ business.business_type|default:"-" }}</div>
                    </div>
                    <div class="row py-2 border-bottom border-light-subtle">
                        <div class="col-sm-4 text-muted">ì‚¬ì—…ì¥ ìœ„ì¹˜</div>
                        <div class="col-sm-8 text-secondary">{{ business.location|default:"ë“±ë¡ëœ ì£¼ì†Œê°€ ì—†ìŠµë‹ˆë‹¤." }}</div>
                    </div>
                    <div class="row py-2">
                        <div class="col-sm-4 text-muted">ë“±ë¡ì¼</div>
                        <div class="col-sm-8">{{ business.created_at|date:"Y-m-d" }}</div>
                    </div>
                </div>
            </div>

            <div class="card border-0 shadow-sm" style="border-radius: 15px;">
                <div class="card-header bg-white py-3 border-bottom">
                    <h5 class="fw-bold mb-0 text-dark">ğŸ“ ì‚¬ì—…ì¥ ë©”ëª¨ / ì„¤ëª…</h5>
                </div>
                <div class="card-body p-4" style="min-height: 120px;">
                    <p class="text-secondary mb-0" style="white-space: pre-wrap; line-height: 1.6;">{{ business.memo|default:"ì¶”ê°€ëœ ì„¤ëª…ì´ ì—†ìŠµë‹ˆë‹¤." }}</p>
                </div>
            </div>
        </div>

        <div class="col-lg-4">
            <div class="card border-0 shadow-sm mb-4 text-center p-4" style="background-color: #fff; border-radius: 15px;">
                <h6 class="text-muted small fw-bold mb-2 text-uppercase" style="letter-spacing: 0.5px;">ëˆ„ì  ê±°ë˜ ê±´ìˆ˜</h6>
                <div class="d-flex align-items-baseline justify-content-center">
                    <h2 class="mb-0 fw-bold text-primary">{{ business.transactions.count|intcomma }}</h2>
                    <span class="ms-2 text-muted fw-bold">ê±´</span>
                </div>
            </div>

            <div class="card border-0 shadow-sm" style="background-color: #f8faff; border: 1px solid #eef2ff; border-radius: 15px;">
                <div class="card-body p-4">
                    <h6 class="text-muted small fw-bold mb-4 text-uppercase" style="letter-spacing: 0.5px;">ğŸ’° ì „ì²´ ê¸°ê°„ ì§‘ê³„</h6>
                    
                    <div class="mb-4">
                        <small class="text-muted d-block mb-1">ì´ ìˆ˜ì…</small>
                        <h4 class="fw-bold text-success">{{ business.get_total_revenue|intcomma }}<small class="fs-6 fw-normal ms-1">ì›</small></h4>
                    </div>
                    
                    <div class="mb-2">
                        <small class="text-muted d-block mb-1">ì´ ì§€ì¶œ</small>
                        <h4 class="fw-bold text-danger">{{ business.get_total_expense|intcomma }}<small class="fs-6 fw-normal ms-1">ì›</small></h4>
                    </div>

                    <hr class="my-3 text-light-emphasis">

                    <a href="{% url 'businesses:business_statistics' business.pk %}" class="btn btn-primary w-100 fw-bold py-2 mt-2 shadow-sm">
                        ğŸ“Š ìƒì„¸ ë¶„ì„ í†µê³„ ë³´ê¸°
                    </a>
                </div>
            </div>
        </div>
    </div> </div>
{% endblock %}